import{_ as e,c as s,o as l,a9 as i}from"./chunks/framework.GQWhFI7o.js";const d=JSON.parse('{"title":"google 地图 TMS 服务参数解析","description":"","frontmatter":{"createDate":"2023/08/17","tags":"map"},"headers":[],"relativePath":"技术的小记/google 地图 TMS 服务参数解析/index.md","filePath":"技术的小记/google 地图 TMS 服务参数解析/index.md","lastUpdated":1757851870000}'),p={name:"技术的小记/google 地图 TMS 服务参数解析/index.md"};function t(r,a,o,n,h,g){return l(),s("div",null,a[0]||(a[0]=[i('<h1 id="google-地图-tms-服务参数解析" tabindex="-1">google 地图 TMS 服务参数解析 <a class="header-anchor" href="#google-地图-tms-服务参数解析" aria-label="Permalink to &quot;google 地图 TMS 服务参数解析&quot;">​</a></h1><p>2023年08月17日</p><h1 id="_1-前言" tabindex="-1">1. 前言 <a class="header-anchor" href="#_1-前言" aria-label="Permalink to &quot;1. 前言&quot;">​</a></h1><p>google 地图 TMS 瓦片精细，性能卓越，免费，许多 GIS 爱好者或者开发者习惯使用这个服务作为应用的底图。但这个 api google 并没有推荐使用，所以并不能找到官方说明文档。Google TMS 服务 url 形如 <a href="https://mt0.google.com/vt/lyrs=y&amp;scale=2&amp;x=6675&amp;y=3572&amp;z=13&amp;s=Galile&amp;gl=cn" target="_blank" rel="noreferrer">https://mt0.google.com/vt/lyrs=y&amp;scale=2&amp;x=6675&amp;y=3572&amp;z=13&amp;s=Galile&amp;gl=cn</a> ，点击打开是中国广东省东莞市某地的瓦片，修改 url 参数，我们可以看到，尽管瓦片位置没有变化，但是瓦片的内容却有所不同。这就令人好奇，Google TMS 服务究竟有多少参数可以设置，每个参数的含义是什么。</p><p>本文尝试解析这些参数的含义。</p><h1 id="_2-google-tms-格式" tabindex="-1">2. Google TMS 格式 <a class="header-anchor" href="#_2-google-tms-格式" aria-label="Permalink to &quot;2. Google TMS 格式&quot;">​</a></h1><p>https://mt{s}.google.cn/vt/[parameters]</p><p>或</p><p>https://mt{s}.google.com/maps/vt/[parameters]</p><p><s>或</s></p><p><s><p><a href="https://gac-geo.googlecnapps.cn/maps/vt/%5Bparameters%5D" target="_blank" rel="noreferrer">https://gac-geo.googlecnapps.cn/maps/vt/[parameters]</a></p></s></p><p>s 表示 cdn ，取值范围是 0 到 3 ，parameter 详见下一节。</p><h1 id="_3-参数说明" tabindex="-1">3. 参数说明 <a class="header-anchor" href="#_3-参数说明" aria-label="Permalink to &quot;3. 参数说明&quot;">​</a></h1><ul><li>x</li></ul><p>x 坐标</p><ul><li>y</li></ul><p>y 坐标</p><ul><li>z</li></ul><p>z 坐标，即缩放等级</p><ul><li>hl</li></ul><p>host language ，即显示语言，值为语言码，语言码详见<a href="https://developers.google.com/custom-search/docs/xml_results_appendices#interfaceLanguages" target="_blank" rel="noreferrer">支持的语言</a> 。</p><ul><li>gl</li></ul><p>geography location ，即地理位置，值为国家码，国家码详见<a href="https://developers.google.com/custom-search/docs/xml_results_appendices#countryCodes" target="_blank" rel="noreferrer">这里</a> 。</p><p>这是一个从 Google Search 推断出来的参数，设置 gl 会影响瓦片标注内容（例如巴黎，在 gl=CN 和 gl=HK 检索出来的瓦片标注的 marker 不一样）。特别地，大陆使用 GCJ-02 坐标系，如果不设置 gl=cn ，标注和底图会有偏移。</p><ul><li>lyrs[@version]</li></ul><p>layers ，即图层。图层可以是以下选项：</p><p>h：仅路网和标注 m：带地形图的标准地图 p：带路网的地形图 r：标准地图</p><p>s：仅卫星图 t：仅地形图 y：带路网的卫星图</p><p>lyrs 可以取其中一个值，也可以取多个值组合，例如 lyrs=s,h ，代表带路网的卫星图，和 y 等效。</p><p>可以指定版本号，版本号紧跟在 lyrs 后面，用字符 @ 间隔。例如 lyrs=s@125 表示仅卫星图且版本为 125。</p><ul><li>scale</li></ul><p>即放大倍数，可以是 1、2、3、4 中的一种。 瓦片标准大小是 256<em>256 。 scale=1 表示不放大，即标准大小； scale=2 表示放大 2 倍，即 512</em>512 ； scale=3 表示方法 3 倍，即 768<em>768 ； scale=4 表示方法 4 倍，即 1024</em>1024 ；</p><p>大于 4 的值将会被忽略。</p><ul><li>s</li></ul><p>校验字符串。按以下规律变化，可以用以下代码计算</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Galileo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> coord.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> coord.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h1 id="_4-风险" tabindex="-1">4. 风险 <a class="header-anchor" href="#_4-风险" aria-label="Permalink to &quot;4. 风险&quot;">​</a></h1><p>免费 api 存在比较多风险</p><ol><li><p>api 被供应商停用</p></li><li><p>api 变更，但供应商没有通知且不提供文档</p></li><li><p>商用的法律风险</p></li></ol>',39)]))}const m=e(p,[["render",t]]);export{d as __pageData,m as default};
