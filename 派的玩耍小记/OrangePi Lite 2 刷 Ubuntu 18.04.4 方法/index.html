<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OrangePi Lite 2 刷 Ubuntu 18.04.4 方法 | Yangholmes' blog</title>
    <meta name="description" content="blog">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.CcAYowL6.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.B8lwAS6A.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DDwUWIar.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Czu1npcN.js">
    <link rel="modulepreload" href="/assets/派的玩耍小记_OrangePi Lite 2 刷 Ubuntu 18.04.4 方法_index.md.BIUe-pjM.lean.js">
    <link rel="icon" type="image/x-icon" href="/icon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><div class="overlay" data-v-c4aa3776></div><!--teleport anchor-->
    <div id="app"><div class="main-layout" data-v-bbaec52f><div class="left-side" data-v-bbaec52f><div class="sidebar" data-v-bbaec52f data-v-c4aa3776><div class="mobile-only handler" data-v-c4aa3776 data-v-26c03762 data-v-8a8dc170><!--[--><div class="toggle-handler" data-v-26c03762><span class="vpi-chevron-right icon" data-v-26c03762></span></div><!--]--></div><div class="top-bar" data-v-c4aa3776><div class="theme-switch is-dark" data-v-c4aa3776 data-v-6427e52d><div class="round-button switch sun" data-v-6427e52d data-v-d3afb744><span class="vpi-sun icon" data-v-d3afb744></span></div><div class="round-button switch moon" data-v-6427e52d data-v-d3afb744><span class="vpi-moon icon" data-v-d3afb744></span></div></div><div class="VPNavBarSearch plugin search" data-v-c4aa3776 data-v-d17e8928><!----><div id="docsearch"><!--[--><div class="round-button" data-v-d17e8928 data-v-d3afb744><span class="vpi-search icon" data-v-d3afb744></span></div><!--]--></div></div></div><ul class="nav" data-v-c4aa3776><!--[--><li class="" data-v-c4aa3776><a href="/技术的小记/" data-v-c4aa3776>技术的小记</a></li><li class="active" data-v-c4aa3776><a href="/派的玩耍小记/" data-v-c4aa3776>派的玩耍小记</a></li><li class="" data-v-c4aa3776><a href="/生活咏叹调/" data-v-c4aa3776>生活咏叹调</a></li><!--]--></ul><div class="bottom-bar" data-v-c4aa3776><ul class="socials" data-v-c4aa3776 data-v-fb1a9594><!--[--><li data-v-fb1a9594><a href="https://github.com/Yangholmes" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="https://dev.to/yangholmes" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="https://www.instagram.com/yangholmes/" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="/wechat-qrcode.png" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><!--]--></ul></div><!--teleport start--><!--teleport end--></div></div><main class="content" data-v-bbaec52f><div class="nav-bar" data-v-bbaec52f data-v-22de979f><div class="round-button" data-v-22de979f data-v-d3afb744><span class="vpi-arrow-left icon" data-v-d3afb744></span></div></div><div class="page" data-v-bbaec52f data-v-872e3c31><div class="vp-doc" data-v-872e3c31><div style="position:relative;" data-v-872e3c31><div><h4 id="尴尬的场景" tabindex="-1">尴尬的场景 <a class="header-anchor" href="#尴尬的场景" aria-label="Permalink to &quot;尴尬的场景&quot;">​</a></h4><p><strong>2020-05-03</strong></p><p>OrangePi Lite 2 可玩度很高，性价比也很高，是一款真香机。但香橙官方一直没给出 OrangePi Lite 2 适配的 Ubuntu 18 以上版本的固件，目前最新是 Ubuntu 16 （官方释出了 WIP 版本的 18，还不是 supported），Armbian 适配的 Lite 2 固件又一直没搞定蓝牙和声卡。用来做服务器，官方系统版本太旧，用来做显示，Armbian 蓝牙和声卡又用不了，挺尴尬的。</p><p>如果使用 Linux 桌面系统作为娱乐工具，其实还是蛮鸡肋的，因为缺少娱乐服务生态，想看个 4K 的在线视频？不好意思，资源供应商只提供 Windows 和 Mac 两款 PC 版本的客户端，或者 Android 和 iPhone 手机的 app；网页观看？不好意思，最高只有 720p 。。。</p><p>所以去解决 Armbian 的驱动显得没有必要，还不如想想怎么把官方提供的 Ubuntu 16 升级到 18。</p><h4 id="查找资料" tabindex="-1">查找资料 <a class="header-anchor" href="#查找资料" aria-label="Permalink to &quot;查找资料&quot;">​</a></h4><p>Ubuntu 是支持在线升级系统版本的，依托 Debian 强大的包管理系统，只需要几句<code>apt</code>指令就可以完成。</p><ol><li><p>更新源</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist-upgrade</span></span></code></pre></div></li><li><p>安装 update-manager-core</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-manager-core</span></span></code></pre></div></li><li><p>升级</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> do-release-upgrade</span></span></code></pre></div><p>执行了这条命令之后，Ubuntu 会开始进行升级，中间会有很多次询问，是否确定、是否更改设置、ssh 是否覆盖更新，我都选择了 Yes，当然如果不需要更新，也可以选择 No。因为担心中文显示的问题，console 编码我选择自动，没有选择缺省的 拉丁 1 。</p></li></ol><h4 id="遭受挫折" tabindex="-1">遭受挫折 <a class="header-anchor" href="#遭受挫折" aria-label="Permalink to &quot;遭受挫折&quot;">​</a></h4><p>升级方法如此简单，预示着升级过程一定不会很顺利。果然，升级进行到某个阶段的时候，中止报错了。</p><p>错误提示是 /boot 分区空间不足，至少需要 80MB ，虽然忘记截图了，但是错误信息我还是记得很清楚。</p><p>我翻出了从官网下载的官方 ROM （版本 OrangePi_Lite2_xenial_server_linux4.9_v1.3.img），用磁盘工具分析了一下分区情况：</p><p><img src="/assets/%E5%AE%98%E6%96%B9ROM%E5%88%86%E5%8C%BA%E6%83%85%E5%86%B5.DbYZlb6Z.png" alt="官方ROM分区情况"></p><p>官方 Ubuntu 镜像只给 /boot 分区分配了 50MB 容量，而<code>do-release-update</code>需要至少 80MB 空闲空间，除去 /boot 分区已有的文件，剩余空间肯定不满 80MB，升级失败。</p><p>如何扩大 /boot 分区成为了大问题。</p><h4 id="思考解法" tabindex="-1">思考解法 <a class="header-anchor" href="#思考解法" aria-label="Permalink to &quot;思考解法&quot;">​</a></h4><p>既然 /boot 分区太小，那么想办法扩容不就好了。</p><p><img src="/assets/%E9%BB%98%E8%AE%A4%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88.EE5wJd0F.png" alt="默认分区方案"></p><p>镜像文件有大概 2GB 那么大，我猜测官方在制作这个镜像的时候，假定用户使用的 SD 卡最小就是 2GB 。除了 /boot 分区用了 500MB 以外，磁盘开头还预留了 20MB 空闲，应该是作为 MBR 的引导（我猜的），那么， / 分区就有足足 1.3GB 空间，但实际上 / 分区文件只占用了 88% 左右，我们可以从 / 分区调剂出大概 161.5MB 空间，而且 / 分区和 /boot 分区紧邻，调整起来就更容易了。</p><p><img src="/assets/%E5%88%92%E5%87%BA%E7%A9%BA%E9%97%B2%E7%A9%BA%E9%97%B4.DWo0LYAh.png" alt="划出空闲空间"></p><p>实际划拨的是否发现，虽然显示 12% 空闲，但是实际上只能划大概 43MB 出来，足够用了。</p><p><img src="/assets/%E8%B0%83%E6%95%B4boot%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F.DUOaSIiS.png" alt="调整 /boot 分区大小"></p><p>最终 /boot 分区获得了 93.4MB 空间，省一省还是刚刚好的。</p><p><strong>友情提示</strong>：修改 .img 镜像文件之前，最好对镜像源进行备份，以免操作失败丢失数据。</p><h4 id="升级" tabindex="-1">升级！ <a class="header-anchor" href="#升级" aria-label="Permalink to &quot;升级！&quot;">​</a></h4><p>开机。</p><p><img src="/assets/%E5%BC%80%E6%9C%BA.DL52t_pa.png" alt="开机"> 照着上面说的的方法升级。</p><p><img src="/assets/%E5%8D%87%E7%BA%A7.B639EXR6.png" alt="升级"></p><p>就这样子，获得了 Ubuntu 18.04.4 。</p><h4 id="留一个坑" tabindex="-1">留一个坑 <a class="header-anchor" href="#留一个坑" aria-label="Permalink to &quot;留一个坑&quot;">​</a></h4><p>调整过分区表的镜像，烧录之后，自带的扩容脚本<code>resize_rootfs.sh</code>就无法正常使用了，总会提示扩容失败。这个问题解决起来也不难的，下回再写。</p></div></div></div><div data-v-872e3c31></div><div class="footer" data-v-872e3c31 data-v-7d1942f1><p data-v-7d1942f1> © 2017 ~ 2025 • Yangholmes </p><p class="driver" data-v-7d1942f1> 使用 ❤️ <a href="https://vitepress.dev/" target="_blank" data-v-7d1942f1>Vitepress</a> 搭建 - Yangholmes 提供主题 </p></div></div></main></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"DzrVBHMf\",\"技术的小记_atom 改装指南_index.md\":\"Buft-e8a\",\"技术的小记_extjs 自定义 datetimefield 控件_index.md\":\"CYxz4OWc\",\"技术的小记_google 地图 tms 服务参数解析_index.md\":\"C5ni8TpA\",\"技术的小记_index.md\":\"BMcK2OCH\",\"技术的小记_web 应用榨干 cpu 性能的正确姿势_index.md\":\"7caExHnb\",\"技术的小记_什么是原型链_index.md\":\"USrEwehB\",\"技术的小记_如何为 vue 组件提供 slots 静态类型检查_index.md\":\"CJBIGh7v\",\"技术的小记_如何在 web 应用中使用 gdal （一）_index.md\":\"ap7TPeK6\",\"技术的小记_如何在 web 应用中使用 gdal （二）_index.md\":\"QEdvLEtg\",\"技术的小记_如何设计一个 brainfuck 解释器_index.md\":\"BBnRwgHC\",\"技术的小记_如何设计一个易用的tag组件_index.md\":\"DkkdjZnP\",\"技术的小记_脚本化css_index.md\":\"BKEXnqi4\",\"派的玩耍小记_c 的 main 函数_index.md\":\"BnkFp1Au\",\"派的玩耍小记_gcc 的编译过程_index.md\":\"DBk_Qmmj\",\"派的玩耍小记_index.md\":\"yXnWn1KN\",\"派的玩耍小记_orangepi lite 2 刷 ubuntu 18.04.4 方法_index.md\":\"BIUe-pjM\",\"派的玩耍小记_新到的玩具_index.md\":\"aX_iZy4h\",\"派的玩耍小记_驱动步进电机_index.md\":\"CiwpWtdh\",\"生活咏叹调_index.md\":\"1jLb3fBD\",\"生活咏叹调_两个和尚的故事_index.md\":\"CrplXifS\",\"生活咏叹调_我想居然想变老_index.md\":\"PgeCWkM-\",\"生活咏叹调_生命_index.md\":\"vpMlGsRD\",\"生活咏叹调_生活宝鉴_index.md\":\"x_H4xvEc\",\"生活咏叹调_顽强的绿萝_index.md\":\"Di4GKOLX\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-cn\",\"dir\":\"ltr\",\"title\":\"Yangholmes' blog\",\"description\":\"blog\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"categories\":[\"技术的小记\",\"派的玩耍小记\",\"生活咏叹调\"],\"posts\":{\"技术的小记\":[{\"title\":\"如何在 web 应用中使用 GDAL （二）\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何在 web 应用中使用 GDAL （二）\",\"createDate\":\"2025/08/10\",\"excerpt\":\"\"},{\"title\":\"如何在 web 应用中使用 GDAL （一）\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何在 web 应用中使用 GDAL （一）\",\"createDate\":\"2025/08/04\",\"excerpt\":\"\"},{\"title\":\"如何为 Vue 组件提供 slots 静态类型检查\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何为 Vue 组件提供 slots 静态类型检查\",\"createDate\":\"2025/05/28\",\"excerpt\":\"\"},{\"title\":\"google 地图 TMS 服务参数解析\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/google 地图 TMS 服务参数解析\",\"createDate\":\"2023/08/17\",\"excerpt\":\"\"},{\"title\":\"web 应用榨干 CPU 性能的正确姿势\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/web 应用榨干 CPU 性能的正确姿势\",\"createDate\":\"2021/09/03\",\"excerpt\":\"\"},{\"title\":\"什么是原型链\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/什么是原型链\",\"createDate\":\"2021/01/13\",\"excerpt\":\"\"},{\"title\":\"Atom 改装指南\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/Atom 改装指南\",\"createDate\":\"2018/06/22\",\"excerpt\":\"\"},{\"title\":\"如何设计一个 BrainFuck 解释器\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何设计一个 BrainFuck 解释器\",\"createDate\":1526860800000,\"excerpt\":\"\"},{\"title\":\"如何设计一个易用的tag组件\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何设计一个易用的tag组件\",\"createDate\":1526342400000,\"excerpt\":\"\"},{\"title\":\"脚本化CSS\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/脚本化CSS\",\"createDate\":\"2016/05/09\",\"excerpt\":\"\"},{\"title\":\"ExtJS 自定义 datetimefield 控件\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/ExtJS 自定义 datetimefield 控件\",\"createDate\":\"2016/05/07\",\"excerpt\":\"\"}],\"派的玩耍小记\":[{\"title\":\"OrangePi Lite 2 刷 Ubuntu 18.04.4 方法\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/OrangePi Lite 2 刷 Ubuntu 18.04.4 方法\",\"createDate\":\"2020/05/03\",\"excerpt\":\"\"},{\"title\":\"驱动步进电机\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/驱动步进电机\",\"createDate\":\"2019/11/23\",\"excerpt\":\"\"},{\"title\":\"C 的 main 函数\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/C 的 main 函数\",\"createDate\":\"2019/10/27\",\"excerpt\":\"\"},{\"title\":\"gcc 的编译过程\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/gcc 的编译过程\",\"createDate\":\"2019/10/27\",\"excerpt\":\"\"},{\"title\":\"新到的玩具\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/新到的玩具\",\"createDate\":1572019200000,\"excerpt\":\"\"}],\"生活咏叹调\":[{\"title\":\"生活宝鉴\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/生活宝鉴\",\"createDate\":\"2021/05/09\",\"excerpt\":\"\"},{\"title\":\"两个和尚的故事\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/两个和尚的故事\",\"createDate\":\"2021/02/26\",\"excerpt\":\"\"},{\"title\":\"顽强的绿萝\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/顽强的绿萝\",\"createDate\":\"2020/11/19\",\"excerpt\":\"\"},{\"title\":\"生命\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/生命\",\"createDate\":\"2020/11/18\",\"excerpt\":\"\"},{\"title\":\"我想居然想变老\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/我想居然想变老\",\"createDate\":\"2020/11/17\",\"excerpt\":\"\"}]},\"lastUpdated\":true,\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Yangholmes\"},{\"icon\":\"dev\",\"link\":\"https://dev.to/yangholmes\"},{\"icon\":\"instagram\",\"link\":\"https://www.instagram.com/yangholmes/\"},{\"icon\":\"wechat\",\"link\":\"/wechat-qrcode.png\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  <script type="text/javascript">
          (function(c,l,a,r,i,t,y){
              c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
              t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
              y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
          })(window, document, "clarity", "script", "sqwvxx7phf");
        </script></body>
</html>