(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{78:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h3",{attrs:{id:"我的代码风格手册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我的代码风格手册","aria-hidden":"true"}},[t._v("#")]),t._v(" 我的代码风格手册")]),s("p",[s("strong",[t._v("2018-08-07")])]),s("blockquote",[s("p",[t._v("All code in any code-base should look like a single person typed it, no matter how many people contributed.")])]),s("h4",{attrs:{id:"起源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#起源","aria-hidden":"true"}},[t._v("#")]),t._v(" 起源")]),s("p",[t._v("第一次参与团队合作开发OA的经历让我感受到，阅读/修改别人写的代码居然会是痛苦的事情。当时还是在一个没有多少开发经验的小团队里面做搬运工，用的还是"),s("code",[t._v("ExtJS")]),t._v("4.x版本的前端框架，后端是著名的"),s("code",[t._v("Spring")]),t._v(" + "),s("code",[t._v("Struts")]),t._v(" + "),s("code",[t._v("Hibernate")]),t._v("，因为是搬砖岗位，所以前端后端都要做一些。当我在项目中看到类似下面这种代码的时候，眉头是紧皱的：")]),s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @file xxx.java")]),t._v("\n  "),s("span",{attrs:{class:"token keyword"}},[t._v("for")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),s("span",{attrs:{class:"token number"}},[t._v("0")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" Arr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("size")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{attrs:{class:"token operator"}},[t._v("++")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\ntemp "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("Arr"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token function"}},[t._v("println")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("   "),s("span",{attrs:{class:"token string"}},[t._v('"++++++++++"')]),s("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("temp"),s("span",{attrs:{class:"token operator"}},[t._v("+")]),s("span",{attrs:{class:"token string"}},[t._v('"=========="')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("// @file xxx.js")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" xiangmu\n  ajax"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("get")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'http://xxx.action'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{attrs:{class:"token keyword"}},[t._v("function")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    xiangmu "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("project\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("log")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xiangmu"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),s("p",[t._v("代码的缩进无法直视，有时2个空格，有时一个"),s("code",[t._v("tab")]),t._v("，有时又是4个空格；花括号换行非常随意，有时换行有时不换行；"),s("code",[t._v("JavaScript")]),t._v("变量声明不进行初始化，命名随意，拼音横行；不写分号；括号里空格随意，多打了几个空格视而不见……")]),s("p",[t._v("写这种乱糟糟很随意的代码很轻松，但是过了几天发现问题回头review的时候就会发现难以阅读甚至无法阅读。尤其是阅读别人写的这种代码😭。")]),s("h4",{attrs:{id:"初次尝试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初次尝试","aria-hidden":"true"}},[t._v("#")]),t._v(" 初次尝试")]),s("p",[t._v("这段经历过后我就决定要养成良好的编码习惯。终极目标是在团队中规定统一的代码风格，如果这个事情推不动，那么至少自己的代码应该是合格的。")]),s("p",[t._v("第一次尝试，我在之后的一个项目中添加了代码风格的README.md文档，并在teamwork工具中告知了团队其他成员这个规范。类似这样：")]),s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("* "),s("span",{attrs:{class:"token code keyword"}},[t._v("`JavaScript`")]),t._v("规范\n"),s("span",{attrs:{class:"token code keyword"}},[t._v('    * 常量：全部大写，单词以下划线"\\_"区分。')]),t._v("\n"),s("span",{attrs:{class:"token code keyword"}},[t._v('    * 变量（属性）：按照驼峰法命名，首字母小写。例如：firstVar 是正确的变量名，FirstVar 、firstvar 或者FIRVAR都是错误的。私有属性应在变量名前面加上下划线"\\_"。例如_secondVar。')]),t._v("\n"),s("span",{attrs:{class:"token code keyword"}},[t._v("    * 函数（方法）：命名规则与变量名相同。")]),t._v("\n"),s("span",{attrs:{class:"token code keyword"}},[t._v("    * 类：类的命名按照帕斯卡命名法，为了和属性、方法有所区分，首字母应大写。例如FirstObject 是正确的命名。")]),t._v("\n"),s("span",{attrs:{class:"token code keyword"}},[t._v('    * 文件名：全部小写，单词以连接符"-"区分，切勿使用其他符号。')]),t._v("\n"),s("span",{attrs:{class:"token code keyword"}},[t._v("    * 必须且只可使用不带BOM的UTF-8编码。")]),t._v("\n")])]),s("p",[t._v("团队的其他同事看完这个规范之后，用“are you kidding”的眼神看了我一眼，说着“为什么要这么麻烦”，“这样一天也做不了多少事情”之类的话，回去写他们自由的代码去了。")]),s("p",[t._v("所以最后这个规范也就只有我一个人在遵守，直到我离开了这个团队。")]),s("p",[t._v("初始尝试宣告失败。")]),s("h4",{attrs:{id:"强制规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 强制规范")]),s("p",[t._v("后来离开了上面说的那个团队，去到百度地图，才知道由代码风格强制规范这个东西。百度内部进行代码托管和版本管理的系统是自家的icode，每一次push提交代码之后，必须通过线上机器评审和同事的人工评审才能合入分支，其中线上机器评审就包括代码风格检查。其中，前端的代码规范使用的是"),s("a",{attrs:{href:"http://fecs.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("FECS")])]),t._v("，也是出自百度自家的产品。")]),s("p",[s("code",[t._v("FECS")]),t._v("是一套非常详细的代码规范，支持"),s("code",[t._v("html")]),t._v("、"),s("code",[t._v("css")]),t._v("、"),s("code",[t._v("less")]),t._v("和"),s("code",[t._v("JavaScript")]),t._v("四种格式检查。"),s("code",[t._v("FECS")]),t._v("定制了一套"),s("code",[t._v("ESLint")]),t._v("规范，")]),s("p",[t._v("同时也是基于"),s("code",[t._v("Node.js")]),t._v("的前端代码检查工具，提供"),s("code",[t._v("Sublime Text")]),t._v("、"),s("code",[t._v("Atom")]),t._v("、"),s("code",[t._v("VS Code")]),t._v("等现在编辑器插件，支持"),s("code",[t._v("Gulp")]),t._v("、"),s("code",[t._v("Grunt")]),t._v("等构建化工具插件（好像还没有"),s("code",[t._v("webpack")]),t._v("插件）。其中"),s("code",[t._v("html")]),t._v("检查/格式化是基于"),s("code",[t._v("htmlcs")]),t._v("工具，"),s("code",[t._v("css")]),t._v("检查是基于"),s("code",[t._v("csshint")]),t._v("工具，"),s("code",[t._v("less")]),t._v("检查是基于"),s("code",[t._v("lesslint")]),t._v("工具，"),s("code",[t._v("JavaScript")]),t._v("修复是基于"),s("code",[t._v("jformatter")]),t._v("工具，")])])}],!1,null,null,null);a.default=e.exports}}]);