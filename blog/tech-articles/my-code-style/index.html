<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Yangholmes Blog | 我的代码风格手册</title>
    <meta name="description" content="Yangholmes Blog">
    <link rel="icon" href="http://yangholmes.github.io/assets/img/icon.png">
    
    <link rel="preload" href="/blog/assets/css/0.styles.588e8900.css" as="style"><link rel="preload" href="/blog/assets/js/app.a3a9856d.js" as="script"><link rel="preload" href="/blog/assets/js/4.bb515b2b.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.2e5c8a59.js"><link rel="prefetch" href="/blog/assets/js/2.d3c678a8.js"><link rel="prefetch" href="/blog/assets/js/3.468f48fe.js"><link rel="prefetch" href="/blog/assets/js/5.3841a476.js"><link rel="prefetch" href="/blog/assets/js/6.b29e967f.js"><link rel="prefetch" href="/blog/assets/js/7.1350a847.js"><link rel="prefetch" href="/blog/assets/js/8.098b6a74.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.588e8900.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/blog/" class="home-link router-link-active"><img src="http://yangholmes.github.io/assets/img/yangholmes.jpg" class="logo"><span class="site-name can-hide">
            Yangholmes Blog
        </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/tech-articles/" class="nav-link router-link-active">技术小文章</a></div><div class="nav-item"><a href="http://yangholmes.github.io/playground/resume/" target="_blank" rel="noopener noreferrer" class="nav-link">我的简历</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/tech-articles/" class="nav-link router-link-active">技术小文章</a></div><div class="nav-item"><a href="http://yangholmes.github.io/playground/resume/" target="_blank" rel="noopener noreferrer" class="nav-link">我的简历</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>技术小文章</span><!----></p><ul class="sidebar-group-items"><li><a href="/blog/tech-articles/how-to-create-ex-tag/" class="sidebar-link">如何设计一个易用的tag组件</a></li><li><a href="/blog/tech-articles/hello-vue-extends/" class="sidebar-link">“面向对象”的组件开发</a></li><li><a href="/blog/tech-articles/brainfuck/" class="sidebar-link">BrainFuck解释器</a></li><li><a href="/blog/tech-articles/why-atom/" class="sidebar-link">Atom 改装指南</a></li><li><a href="/blog/tech-articles/my-code-style/" class="active sidebar-link">我的代码风格手册</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/tech-articles/playground/" class="sidebar-link">Yangholmes 的小作品</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h3 id="我的代码风格手册"><a href="#我的代码风格手册" aria-hidden="true" class="header-anchor">#</a> 我的代码风格手册</h3><p><strong>2018-08-07</strong></p><blockquote><p>All code in any code-base should look like a single person typed it, no matter how many people contributed.</p></blockquote><h4 id="起源"><a href="#起源" aria-hidden="true" class="header-anchor">#</a> 起源</h4><p>第一次参与团队合作开发OA的经历让我感受到，阅读/修改别人写的代码居然会是痛苦的事情。当时还是在一个没有多少开发经验的小团队里面做搬运工，用的还是<code>ExtJS</code>4.x版本的前端框架，后端是著名的<code>Spring</code> + <code>Struts</code> + <code>Hibernate</code>，因为是搬砖岗位，所以前端后端都要做一些。当我在项目中看到类似下面这种代码的时候，眉头是紧皱的：</p><pre class="language-java"><code><span class="token comment">// @file xxx.java</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span> Arr<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
temp <span class="token operator">=</span>Arr<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>   <span class="token string">&quot;++++++++++&quot;</span><span class="token operator">+</span>temp<span class="token operator">+</span><span class="token string">&quot;==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre class="language-js"><code><span class="token comment">// @file xxx.js</span>
    <span class="token keyword">var</span> xiangmu
  ajax<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'http://xxx.action'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
    xiangmu <span class="token operator">=</span> a<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xiangmu<span class="token punctuation">)</span>
</code></pre><p>代码的缩进无法直视，有时2个空格，有时一个<code>tab</code>，有时又是4个空格；花括号换行非常随意，有时换行有时不换行；<code>JavaScript</code>变量声明不进行初始化，命名随意，拼音横行；不写分号；括号里空格随意，多打了几个空格视而不见……</p><p>写这种乱糟糟很随意的代码很轻松，但是过了几天发现问题回头review的时候就会发现难以阅读甚至无法阅读。尤其是阅读别人写的这种代码😭。</p><p>这种代码是不合格的，尤其是在项目中，极容易出bug，并且无法修复。</p><h4 id="初次尝试"><a href="#初次尝试" aria-hidden="true" class="header-anchor">#</a> 初次尝试</h4><p>这段经历过后我就决定要养成良好的编码习惯。终极目标是在团队中规定统一的代码风格，如果这个事情推不动，那么至少自己的代码应该是合格的。</p><p>第一次尝试，我在之后的一个项目中添加了代码风格的README.md文档，并在teamwork工具中告知了团队其他成员这个规范。类似这样：</p><pre class="language-markdown"><code>* <span class="token code keyword">`JavaScript`</span>规范
<span class="token code keyword">    * 常量：全部大写，单词以下划线&quot;\_&quot;区分。</span>
<span class="token code keyword">    * 变量（属性）：按照驼峰法命名，首字母小写。例如：firstVar 是正确的变量名，FirstVar 、firstvar 或者FIRVAR都是错误的。私有属性应在变量名前面加上下划线&quot;\_&quot;。例如_secondVar。</span>
<span class="token code keyword">    * 函数（方法）：命名规则与变量名相同。</span>
<span class="token code keyword">    * 类：类的命名按照帕斯卡命名法，为了和属性、方法有所区分，首字母应大写。例如FirstObject 是正确的命名。</span>
<span class="token code keyword">    * 文件名：全部小写，单词以连接符&quot;-&quot;区分，切勿使用其他符号。</span>
<span class="token code keyword">    * 必须且只可使用不带BOM的UTF-8编码。</span>
</code></pre><p>团队的其他同事看完这个规范之后，用“are you kidding”的眼神看了我一眼，说着“为什么要这么麻烦”，“这样一天也做不了多少事情”之类的话，回去写他们自由的代码去了。</p><p>所以最后这个规范也就只有我一个人在遵守，直到我离开了这个团队。</p><p>初始尝试宣告失败。</p><h4 id="强制规范"><a href="#强制规范" aria-hidden="true" class="header-anchor">#</a> 强制规范</h4><p>后来离开了上面说的那个团队，去到百度地图，才知道大公司都有代码风格强制规范这个东西。百度内部进行代码托管和版本管理的系统是自家的icode，每一次push提交代码之后，必须通过线上机器评审和同事的人工评审才能合入分支，其中线上机器评审就包括代码风格检查。其中，前端的代码规范使用的是<a href="http://fecs.baidu.com/" target="_blank" rel="noopener noreferrer"><code>FECS</code></a>，也是出自百度自家的产品。</p><p><a href="http://fecs.baidu.com/"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAAApCAYAAAAf8TqUAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wOC0wOFQxMTo0NTo0NyswODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDgtMDhUMTE6NDc6MzQrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDgtMDhUMTE6NDc6MzQrMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTUwMTUxMjctMmI4My0wMDRi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" alt="fecs-logo"></a></p><p><code>FECS</code>是一套非常详细的代码规范，支持<code>html</code>、<code>css</code>、<code>less</code>和<code>JavaScript</code>四种格式检查。<code>FECS</code>定制了一套<code>ESLint</code>规范，结合了百度自定义的部分<code>JavaScript</code>编码规范（自定义规范用前缀<code>fecs-</code>区分），以检查代码中可能存在的质量问题。规范涵盖了众多场景，例如标签的规范、变量名命名规范、行尾逗号分号规范、缩进规范等等。</p><p>同时<code>FECS</code>也是基于<code>Node.js</code>的前端代码检查/修复工具，提供<code>Sublime Text</code>、<code>Atom</code>、<code>VS Code</code>等现代编辑器插件，支持<code>Gulp</code>、<code>Grunt</code>等构建化工具插件（好像还没有<code>webpack</code>插件）。其中<code>html</code>检查/格式化是基于<code>htmlcs</code>工具，<code>css</code>检查是基于<code>csshint</code>工具，<code>less</code>检查是基于<code>lesslint</code>工具，<code>JavaScript</code>修复是基于<code>jformatter</code>工具。修复功能其实就是代码美化，开发人员会更加随意地去编写代码，因为美化功能总能让提交通过机器评审。所以在实际使用中，我更倾向于代码风格检测，而不是修复，因为对于一个程序员来说，养成良好的习惯优于利用工具纠正错误。</p><p>文件内对于压缩过的脚本或者样式，我们可以添加<code>/* eslint-disable */</code>来跳过检测。另外icode的机器评审对于代码风格的限制提供了“豁免/标记误报”功能，对于单次提交的少量风格问题，是可以进行豁免操作的。但在项目中我发现有不少同事都会滥用“豁免/标记误报”功能，而且还开发了批量豁免的浏览器扩展😂。简直是道高一尺魔高一丈。</p><h4 id="好用的eslint"><a href="#好用的eslint" aria-hidden="true" class="header-anchor">#</a> 好用的ESLint</h4></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/blog/tech-articles/why-atom/" class="prev">
          Atom 改装指南
        </a></span><span class="next"><a href="/blog/tech-articles/playground/">
          Yangholmes 的小作品
        </a> →
      </span></p></div></div></div></div>
    <script src="/blog/assets/js/4.bb515b2b.js" defer></script><script src="/blog/assets/js/app.a3a9856d.js" defer></script>
  </body>
</html>
