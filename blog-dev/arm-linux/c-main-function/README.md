### Linux C 程序入口函数 main() 小解
**2019-10-27**

Linux 系统中，C 程序总是从 `main()` 函数开始的，当用户编写好的程序在运行的时候，操作系统慧使用 `exec()` 函数运行程序。在调用 `main()` 之前，`exec()` 系统调用会先调用一个特殊的启动例程，负责从操作系统内核读取程序的命令行参数，为 `main()` 函数准备好工作环境。

`main()` 函数的定义为

```c
int main(int argc, char* argv[], char* envp[]);
```

参数 argc 表示 命令行参数的个数，即参数 argv 的长度，argv 是一个字符串数组指针，argv 的元素就是参数的内容。envp 是系统环境变量列表，存放了一组进程运行过程中会用到的环境变量。

ANSI 规定 `main()` 函数只有前两个参数，而 POSIX 则使用了一个全局的环境变量 environ 来取代 envp ，应用程序可以通过 `getenv()` 和 `putenv()` 函数来读取或者设置一个环境变量。

#### 系统如何执行 `main()` 函数

