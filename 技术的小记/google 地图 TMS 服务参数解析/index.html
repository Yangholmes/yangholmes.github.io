<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>google 地图 TMS 服务参数解析 | Yangholmes' blog</title>
    <meta name="description" content="blog">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.CcAYowL6.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.D7DlSnMS.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DZtHm2gW.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Czu1npcN.js">
    <link rel="modulepreload" href="/assets/技术的小记_google 地图 TMS 服务参数解析_index.md.Bnl-2Tgp.lean.js">
    <link rel="icon" type="image/x-icon" href="/icon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><div class="overlay" data-v-c4aa3776></div><!--teleport anchor-->
    <div id="app"><div class="main-layout" data-v-bbaec52f><div class="left-side" data-v-bbaec52f><div class="sidebar" data-v-bbaec52f data-v-c4aa3776><div class="mobile-only handler" data-v-c4aa3776 data-v-26c03762 data-v-8a8dc170><!--[--><div class="toggle-handler" data-v-26c03762><span class="vpi-chevron-right icon" data-v-26c03762></span></div><!--]--></div><div class="top-bar" data-v-c4aa3776><div class="theme-switch is-dark" data-v-c4aa3776 data-v-6427e52d><div class="round-button switch sun" data-v-6427e52d data-v-d3afb744><span class="vpi-sun icon" data-v-d3afb744></span></div><div class="round-button switch moon" data-v-6427e52d data-v-d3afb744><span class="vpi-moon icon" data-v-d3afb744></span></div></div><div class="VPNavBarSearch plugin search" data-v-c4aa3776 data-v-d17e8928><!----><div id="docsearch"><!--[--><div class="round-button" data-v-d17e8928 data-v-d3afb744><span class="vpi-search icon" data-v-d3afb744></span></div><!--]--></div></div></div><ul class="nav" data-v-c4aa3776><!--[--><li class="active" data-v-c4aa3776><a href="/技术的小记/" data-v-c4aa3776>技术的小记</a></li><li class="" data-v-c4aa3776><a href="/派的玩耍小记/" data-v-c4aa3776>派的玩耍小记</a></li><li class="" data-v-c4aa3776><a href="/生活咏叹调/" data-v-c4aa3776>生活咏叹调</a></li><!--]--></ul><div class="bottom-bar" data-v-c4aa3776><ul class="socials" data-v-c4aa3776 data-v-fb1a9594><!--[--><li data-v-fb1a9594><a href="https://github.com/Yangholmes" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="https://dev.to/yangholmes" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="https://www.instagram.com/yangholmes/" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><li data-v-fb1a9594><a href="/wechat-qrcode.png" target="_blank" rel="noopener noreferrer" data-v-fb1a9594><div class="social-icon" style="--mask-image: "></div></a></li><!--]--></ul></div><!--teleport start--><!--teleport end--></div></div><main class="content" data-v-bbaec52f><div class="nav-bar" data-v-bbaec52f data-v-22de979f><div class="round-button" data-v-22de979f data-v-d3afb744><span class="vpi-arrow-left icon" data-v-d3afb744></span></div></div><div class="page" data-v-bbaec52f data-v-872e3c31><div class="vp-doc" data-v-872e3c31><div style="position:relative;" data-v-872e3c31><div><h1 id="google-地图-tms-服务参数解析" tabindex="-1">google 地图 TMS 服务参数解析 <a class="header-anchor" href="#google-地图-tms-服务参数解析" aria-label="Permalink to &quot;google 地图 TMS 服务参数解析&quot;">​</a></h1><p><strong>2023/08/17</strong></p><h1 id="_1-前言" tabindex="-1">1. 前言 <a class="header-anchor" href="#_1-前言" aria-label="Permalink to &quot;1. 前言&quot;">​</a></h1><p>google 地图 TMS 瓦片精细，性能卓越，免费，许多 GIS 爱好者或者开发者习惯使用这个服务作为应用的底图。但这个 api google 并没有推荐使用，所以并不能找到官方说明文档。Google TMS 服务 url 形如 <a href="https://mt0.google.com/vt/lyrs=y&amp;scale=2&amp;x=6675&amp;y=3572&amp;z=13&amp;s=Galile&amp;gl=cn" target="_blank" rel="noreferrer">https://mt0.google.com/vt/lyrs=y&amp;scale=2&amp;x=6675&amp;y=3572&amp;z=13&amp;s=Galile&amp;gl=cn</a> ，点击打开是中国广东省东莞市某地的瓦片，修改 url 参数，我们可以看到，尽管瓦片位置没有变化，但是瓦片的内容却有所不同。这就令人好奇，Google TMS 服务究竟有多少参数可以设置，每个参数的含义是什么。</p><p>本文尝试解析这些参数的含义。</p><h1 id="_2-google-tms-格式" tabindex="-1">2. Google TMS 格式 <a class="header-anchor" href="#_2-google-tms-格式" aria-label="Permalink to &quot;2. Google TMS 格式&quot;">​</a></h1><p>https://mt{s}.google.cn/vt/[parameters]</p><p>或</p><p>https://mt{s}.google.com/maps/vt/[parameters]</p><p><s>或</s></p><p><s><p><a href="https://gac-geo.googlecnapps.cn/maps/vt/%5Bparameters%5D" target="_blank" rel="noreferrer">https://gac-geo.googlecnapps.cn/maps/vt/[parameters]</a></p></s></p><p>s 表示 cdn ，取值范围是 0 到 3 ，parameter 详见下一节。</p><h1 id="_3-参数说明" tabindex="-1">3. 参数说明 <a class="header-anchor" href="#_3-参数说明" aria-label="Permalink to &quot;3. 参数说明&quot;">​</a></h1><ul><li>x</li></ul><p>x 坐标</p><ul><li>y</li></ul><p>y 坐标</p><ul><li>z</li></ul><p>z 坐标，即缩放等级</p><ul><li>hl</li></ul><p>host language ，即显示语言，值为语言码，语言码详见<a href="https://developers.google.com/custom-search/docs/xml_results_appendices#interfaceLanguages" target="_blank" rel="noreferrer">支持的语言</a> 。</p><ul><li>gl</li></ul><p>geography location ，即地理位置，值为国家码，国家码详见<a href="https://developers.google.com/custom-search/docs/xml_results_appendices#countryCodes" target="_blank" rel="noreferrer">这里</a> 。</p><p>这是一个从 Google Search 推断出来的参数，设置 gl 会影响瓦片标注内容（例如巴黎，在 gl=CN 和 gl=HK 检索出来的瓦片标注的 marker 不一样）。特别地，大陆使用 GCJ-02 坐标系，如果不设置 gl=cn ，标注和底图会有偏移。</p><ul><li>lyrs[@version]</li></ul><p>layers ，即图层。图层可以是以下选项：</p><p>h：仅路网和标注 m：带地形图的标准地图 p：带路网的地形图 r：标准地图</p><p>s：仅卫星图 t：仅地形图 y：带路网的卫星图</p><p>lyrs 可以取其中一个值，也可以取多个值组合，例如 lyrs=s,h ，代表带路网的卫星图，和 y 等效。</p><p>可以指定版本号，版本号紧跟在 lyrs 后面，用字符 @ 间隔。例如 lyrs=s@125 表示仅卫星图且版本为 125。</p><ul><li>scale</li></ul><p>即放大倍数，可以是 1、2、3、4 中的一种。 瓦片标准大小是 256<em>256 。 scale=1 表示不放大，即标准大小； scale=2 表示放大 2 倍，即 512</em>512 ； scale=3 表示方法 3 倍，即 768<em>768 ； scale=4 表示方法 4 倍，即 1024</em>1024 ；</p><p>大于 4 的值将会被忽略。</p><ul><li>s</li></ul><p>校验字符串。按以下规律变化，可以用以下代码计算</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Galileo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> coord.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> coord.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h1 id="_4-风险" tabindex="-1">4. 风险 <a class="header-anchor" href="#_4-风险" aria-label="Permalink to &quot;4. 风险&quot;">​</a></h1><p>免费 api 存在比较多风险</p><ol><li><p>api 被供应商停用</p></li><li><p>api 变更，但供应商没有通知且不提供文档</p></li><li><p>商用的法律风险</p></li></ol></div></div></div><div data-v-872e3c31></div><div class="footer" data-v-872e3c31 data-v-7d1942f1><p data-v-7d1942f1> © 2017 ~ 2025 • Yangholmes </p><p class="driver" data-v-7d1942f1> 使用 ❤️ <a href="https://vitepress.dev/" target="_blank" data-v-7d1942f1>Vitepress</a> 搭建 - Yangholmes 提供主题 </p></div></div></main></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"BB87uqO7\",\"技术的小记_atom 改装指南_index.md\":\"NORZl9zk\",\"技术的小记_extjs 自定义 datetimefield 控件_index.md\":\"CRxW4Tgt\",\"技术的小记_google 地图 tms 服务参数解析_index.md\":\"Bnl-2Tgp\",\"技术的小记_index.md\":\"ClWh_O5N\",\"技术的小记_javascript 变量类型判断_index.md\":\"DOEcV8mR\",\"技术的小记_web 应用榨干 cpu 性能的正确姿势_index.md\":\"BX5aavjD\",\"技术的小记_什么是原型链_index.md\":\"C_Ls-EDt\",\"技术的小记_如何为 vue 组件提供 slots 静态类型检查_index.md\":\"C-TOyH72\",\"技术的小记_如何在 web 应用中使用 gdal （一）_index.md\":\"BXhYdSQN\",\"技术的小记_如何在 web 应用中使用 gdal （二）_index.md\":\"CkuaMcLb\",\"技术的小记_如何设计一个 brainfuck 解释器_index.md\":\"BxxtNC55\",\"技术的小记_如何设计一个易用的tag组件_index.md\":\"CZeOKata\",\"技术的小记_脚本化css_index.md\":\"CZ9CKQag\",\"派的玩耍小记_c 的 main 函数_index.md\":\"DWKDtVAl\",\"派的玩耍小记_gcc 的编译过程_index.md\":\"CM1iE1Uo\",\"派的玩耍小记_index.md\":\"ZYQLl5j2\",\"派的玩耍小记_orangepi lite 2 刷 ubuntu 18.04.4 方法_index.md\":\"CT5u4Es-\",\"派的玩耍小记_新到的玩具_index.md\":\"DEdmUkBz\",\"派的玩耍小记_驱动步进电机_index.md\":\"CRQ93ap6\",\"生活咏叹调_index.md\":\"HbTqWqq-\",\"生活咏叹调_两个和尚的故事_index.md\":\"BCPbhKdY\",\"生活咏叹调_我想居然想变老_index.md\":\"B9q6wkzB\",\"生活咏叹调_生命_index.md\":\"B8s8Fhf6\",\"生活咏叹调_生活宝鉴_index.md\":\"wQvleqpa\",\"生活咏叹调_顽强的绿萝_index.md\":\"CWnc41i5\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-cn\",\"dir\":\"ltr\",\"title\":\"Yangholmes' blog\",\"description\":\"blog\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"categories\":[\"技术的小记\",\"派的玩耍小记\",\"生活咏叹调\"],\"posts\":{\"技术的小记\":[{\"title\":\"如何在 web 应用中使用 GDAL （二）\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何在 web 应用中使用 GDAL （二）\",\"createDate\":\"2025/08/10\",\"excerpt\":\"\"},{\"title\":\"如何在 web 应用中使用 GDAL （一）\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何在 web 应用中使用 GDAL （一）\",\"createDate\":\"2025/08/04\",\"excerpt\":\"\"},{\"title\":\"JavaScript 变量类型判断\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/JavaScript 变量类型判断\",\"createDate\":\"2025/07/12\",\"excerpt\":\"\"},{\"title\":\"如何为 Vue 组件提供 slots 静态类型检查\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何为 Vue 组件提供 slots 静态类型检查\",\"createDate\":\"2025/05/28\",\"excerpt\":\"\"},{\"title\":\"google 地图 TMS 服务参数解析\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/google 地图 TMS 服务参数解析\",\"createDate\":\"2023/08/17\",\"excerpt\":\"\"},{\"title\":\"web 应用榨干 CPU 性能的正确姿势\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/web 应用榨干 CPU 性能的正确姿势\",\"createDate\":\"2021/09/03\",\"excerpt\":\"\"},{\"title\":\"什么是原型链\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/什么是原型链\",\"createDate\":\"2021/01/13\",\"excerpt\":\"\"},{\"title\":\"Atom 改装指南\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/Atom 改装指南\",\"createDate\":\"2018/06/22\",\"excerpt\":\"\"},{\"title\":\"如何设计一个 BrainFuck 解释器\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何设计一个 BrainFuck 解释器\",\"createDate\":1526860800000,\"excerpt\":\"\"},{\"title\":\"如何设计一个易用的tag组件\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/如何设计一个易用的tag组件\",\"createDate\":1526342400000,\"excerpt\":\"\"},{\"title\":\"脚本化CSS\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/脚本化CSS\",\"createDate\":\"2016/05/09\",\"excerpt\":\"\"},{\"title\":\"ExtJS 自定义 datetimefield 控件\",\"category\":\"技术的小记\",\"url\":\"/技术的小记/ExtJS 自定义 datetimefield 控件\",\"createDate\":\"2016/05/07\",\"excerpt\":\"\"}],\"派的玩耍小记\":[{\"title\":\"OrangePi Lite 2 刷 Ubuntu 18.04.4 方法\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/OrangePi Lite 2 刷 Ubuntu 18.04.4 方法\",\"createDate\":\"2020/05/03\",\"excerpt\":\"\"},{\"title\":\"驱动步进电机\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/驱动步进电机\",\"createDate\":\"2019/11/23\",\"excerpt\":\"\"},{\"title\":\"C 的 main 函数\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/C 的 main 函数\",\"createDate\":\"2019/10/27\",\"excerpt\":\"\"},{\"title\":\"gcc 的编译过程\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/gcc 的编译过程\",\"createDate\":\"2019/10/27\",\"excerpt\":\"\"},{\"title\":\"新到的玩具\",\"category\":\"派的玩耍小记\",\"url\":\"/派的玩耍小记/新到的玩具\",\"createDate\":1572019200000,\"excerpt\":\"\"}],\"生活咏叹调\":[{\"title\":\"生活宝鉴\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/生活宝鉴\",\"createDate\":\"2021/05/09\",\"excerpt\":\"\"},{\"title\":\"两个和尚的故事\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/两个和尚的故事\",\"createDate\":\"2021/02/26\",\"excerpt\":\"\"},{\"title\":\"顽强的绿萝\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/顽强的绿萝\",\"createDate\":\"2020/11/19\",\"excerpt\":\"\"},{\"title\":\"生命\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/生命\",\"createDate\":\"2020/11/18\",\"excerpt\":\"\"},{\"title\":\"我想居然想变老\",\"category\":\"生活咏叹调\",\"url\":\"/生活咏叹调/我想居然想变老\",\"createDate\":\"2020/11/17\",\"excerpt\":\"\"}]},\"lastUpdated\":true,\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Yangholmes\"},{\"icon\":\"dev\",\"link\":\"https://dev.to/yangholmes\"},{\"icon\":\"instagram\",\"link\":\"https://www.instagram.com/yangholmes/\"},{\"icon\":\"wechat\",\"link\":\"/wechat-qrcode.png\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  <script type="text/javascript">
          (function(c,l,a,r,i,t,y){
              c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
              t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
              y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
          })(window, document, "clarity", "script", "sqwvxx7phf");
        </script></body>
</html>